-- Miel Hub - Fly V2 (LinearVelocity)

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local root = character:WaitForChild("HumanoidRootPart")

local flyOn = false
local conn
local att, lv, ao
local SPEED = 60

local function startFly()
	if flyOn then return end
	flyOn = true

	att = Instance.new("Attachment", root)

	lv = Instance.new("LinearVelocity")
	lv.Attachment0 = att
	lv.RelativeTo = Enum.ActuatorRelativeTo.World
	lv.MaxForce = math.huge
	lv.VectorVelocity = Vector3.zero
	lv.Parent = root

	ao = Instance.new("AlignOrientation")
	ao.Attachment0 = att
	ao.Mode = Enum.OrientationAlignmentMode.OneAttachment
	ao.AlignType = Enum.AlignType.Parallel
	ao.Responsiveness = 200
	ao.MaxTorque = math.huge
	ao.Parent = root

	conn = RunService.RenderStepped:Connect(function()
		local cam = Workspace.CurrentCamera
		local move = humanoid.MoveDirection
		lv.VectorVelocity =
			(cam.CFrame.LookVector * move.Z +
			 cam.CFrame.RightVector * move.X) * SPEED
		ao.CFrame = cam.CFrame
	end)
end

local function stopFly()
	flyOn = false
	if conn then conn:Disconnect() conn = nil end
	if lv then lv:Destroy() lv = nil end
	if ao then ao:Destroy() ao = nil end
	if att then att:Destroy() att = nil end
end

-- UI
local gui = Instance.new("ScreenGui")
gui.Name = "MielHub"
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

local frame = Instance.new("Frame", gui)
frame.Size = UDim2.new(0, 180, 0, 60)
frame.Position = UDim2.new(0.5, -90, 0.8, 0)
frame.BackgroundColor3 = Color3.fromRGB(20,20,20)
frame.BorderSizePixel = 0
frame.Active = true
frame.Draggable = true

local title = Instance.new("TextLabel", frame)
title.Size = UDim2.new(1,0,0,20)
title.BackgroundTransparency = 1
title.Text = "Miel Hub"
title.Font = Enum.Font.Code
title.TextSize = 14
title.TextColor3 = Color3.new(1,1,1)

local btn = Instance.new("TextButton", frame)
btn.Size = UDim2.new(1,0,0,30)
btn.Position = UDim2.new(0,0,0,25)
btn.BackgroundColor3 = Color3.fromRGB(50,50,50)
btn.TextColor3 = Color3.new(1,1,1)
btn.Font = Enum.Font.Code
btn.TextSize = 14
btn.Text = "Ativar Fly V2"

btn.MouseButton1Click:Connect(function()
	if flyOn then
		stopFly()
		btn.Text = "Ativar Fly V2"
	else
		startFly()
		btn.Text = "Desativar Fly V2"
	end
end)

print("[Miel Hub] Fly V2 carregado.")
