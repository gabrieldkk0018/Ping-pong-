-- MH STEAL CHARACTER (BETA)
-- Visual only | Mobile + PC | Draggable | RGB Border

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer

-- evita duplicar UI
if player.PlayerGui:FindFirstChild("MH_StealUI") then
	player.PlayerGui.MH_StealUI:Destroy()
end

-- ================= GUI =================

local gui = Instance.new("ScreenGui")
gui.Name = "MH_StealUI"
gui.ResetOnSpawn = false
gui.Parent = player.PlayerGui

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 260, 0, 155)
frame.Position = UDim2.new(0.5, -130, 0.4, 0)
frame.BackgroundColor3 = Color3.fromRGB(30,30,40)
frame.BorderSizePixel = 0
frame.Active = true
frame.Draggable = true
frame.Parent = gui
Instance.new("UICorner", frame).CornerRadius = UDim.new(0,10)

-- RGB border
local stroke = Instance.new("UIStroke", frame)
stroke.Thickness = 2
RunService.RenderStepped:Connect(function()
	stroke.Color = Color3.fromHSV((tick() % 5) / 5, 1, 1)
end)

-- Title
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1,0,0,28)
title.BackgroundColor3 = Color3.fromRGB(40,40,55)
title.Text = "MH Steal Character"
title.TextColor3 = Color3.new(1,1,1)
title.Font = Enum.Font.GothamBold
title.TextSize = 14
title.Parent = frame
Instance.new("UICorner", title).CornerRadius = UDim.new(0,10)

-- Info text
local info = Instance.new("TextLabel")
info.Size = UDim2.new(1,-20,0,20)
info.Position = UDim2.new(0,10,0,35)
info.BackgroundTransparency = 1
info.Text = "Type the person's nickname below."
info.TextColor3 = Color3.fromRGB(200,200,200)
info.Font = Enum.Font.Gotham
info.TextSize = 12
info.TextXAlignment = Enum.TextXAlignment.Left
info.Parent = frame

-- TextBox
local box = Instance.new("TextBox")
box.Size = UDim2.new(1,-20,0,28)
box.Position = UDim2.new(0,10,0,60)
box.PlaceholderText = "Username"
box.Text = ""
box.BackgroundColor3 = Color3.fromRGB(45,45,60)
box.TextColor3 = Color3.new(1,1,1)
box.Font = Enum.Font.Gotham
box.TextSize = 13
box.ClearTextOnFocus = false
box.Parent = frame
Instance.new("UICorner", box).CornerRadius = UDim.new(0,8)

-- Button
local btn = Instance.new("TextButton")
btn.Size = UDim2.new(1,-20,0,30)
btn.Position = UDim2.new(0,10,0,95)
btn.Text = "Steal Char"
btn.BackgroundColor3 = Color3.fromRGB(70,120,255)
btn.TextColor3 = Color3.new(1,1,1)
btn.Font = Enum.Font.GothamBold
btn.TextSize = 14
btn.Parent = frame
Instance.new("UICorner", btn).CornerRadius = UDim.new(0,8)

-- Status
local status = Instance.new("TextLabel")
status.Size = UDim2.new(1,-20,0,18)
status.Position = UDim2.new(0,10,0,130)
status.BackgroundTransparency = 1
status.Text = ""
status.TextColor3 = Color3.fromRGB(150,255,150)
status.Font = Enum.Font.Gotham
status.TextSize = 12
status.TextXAlignment = Enum.TextXAlignment.Left
status.Parent = frame

-- ================= CORE FUNCTION =================
-- VISUAL ONLY (ApplyDescription)

local function StealCharacter(username)
	status.Text = "Copying skin..."

	local ok, userId = pcall(function()
		return Players:GetUserIdFromNameAsync(username)
	end)

	if not ok then
		status.Text = "User not found"
		return
	end

	local ok2, desc = pcall(function()
		return Players:GetHumanoidDescriptionFromUserId(userId)
	end)

	if not ok2 or not desc then
		status.Text = "Failed to load avatar"
		return
	end

	local char = player.Character or player.CharacterAdded:Wait()
	local hum = char:FindFirstChildOfClass("Humanoid")

	if not hum then
		status.Text = "Humanoid not found"
		return
	end

	-- aplica SOMENTE aparÃªncia
	hum:ApplyDescription(desc)

	status.Text = "Skin copied successfully"
end

-- Button click
btn.MouseButton1Click:Connect(function()
	if box.Text == "" then
		status.Text = "Invalid username"
	else
		StealCharacter(box.Text)
	end
end)
